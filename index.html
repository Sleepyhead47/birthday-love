<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Happy Birthday My Love ü§ç</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#ff758c">

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI";
  background:linear-gradient(135deg,#ff758c,#ffb3c6);
  min-height:100vh;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
}
.lock{
  position:fixed;
  inset:0;
  background:#111;
  color:white;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  z-index:10;
}
.card{
  width:90%;
  max-width:420px;
  background:white;
  padding:30px;
  border-radius:25px;
  text-align:center;
  box-shadow:0 30px 60px rgba(0,0,0,.35);
  display:none;
  z-index:2;
}
img{
  width:120px;
  height:120px;
  border-radius:50%;
  object-fit:cover;
  border:4px solid #ff4d6d;
}
h1{color:#ff4d6d}
p{color:#444;line-height:1.7}
footer{margin-top:15px;color:#555}
button{
  margin-top:12px;
  padding:10px 20px;
  border:none;
  border-radius:20px;
  background:#ff4d6d;
  color:white;
  font-size:.9rem;
}
.heart{
  position:absolute;
  top:-10px;
  animation:fall linear infinite;
  font-size:18px;
}
@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg)}
}
.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:20;
}
.popup div{
  background:white;
  padding:25px;
  border-radius:20px;
  text-align:center;
}
</style>
</head>

<body>

<!-- LOCK SCREEN -->
<div class="lock" id="lock">
  <h1>ü§ç Almost there</h1>
  <p id="countdown">Loading‚Ä¶</p>
</div>

<!-- MAIN CARD -->
<div class="card" id="card">
  <img src="photo.jpg">
  <h1>Happy Birthday, <span id="name"></span> ü§ç</h1>
  <h3>You turn <span id="age"></span> today ‚ú®</h3>
  <p id="message"></p>
  <footer>‚Äî Always yours, <span id="from"></span></footer>
  <button onclick="playMusic()">üéµ Play Music</button>
</div>

<!-- POPUP -->
<div class="popup" id="popup">
  <div>
    <h1>I love you ü§ç</h1>
    <p>Forever and always.</p>
    <button onclick="popup.style.display='none'">Close</button>
  </div>
</div>

<audio id="music" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
/* ======================
   ‚ú® EDIT THIS ONLY ‚ú®
====================== */
const data = {
  name: "Her Name",
  age: 18,
  message: "You are my favorite thought, my safest place, and my forever choice ü§ç",
  from: "Your Name"
};

/* Fill content */
name.textContent = data.name;
age.textContent = data.age;
from.textContent = data.from;

let i=0;
(function type(){
  if(i<data.message.length){
    message.textContent+=data.message[i++];
    setTimeout(type,40);
  }
})();

/* ===== TEST TARGET (1 minute from open) ===== */
const targetTime = new Date(Date.now() + 60 * 1000);

/* Countdown */
const timer = setInterval(()=>{
  const now = new Date();
  const diff = targetTime - now;

  if(diff <= 0){
    clearInterval(timer);
    lock.style.display="none";
    card.style.display="block";
    setTimeout(()=>popup.style.display="flex",2000);
    return;
  }

  const m = Math.floor(diff/60000);
  const s = Math.floor((diff%60000)/1000);
  countdown.textContent = `Opens in ${m}m ${s}s`;
},1000);

/* Music */
function playMusic(){ music.play(); }

/* Hearts */
for(let i=0;i<35;i++){
  const h=document.createElement("div");
  h.className="heart";
  h.textContent="ü§ç";
  h.style.left=Math.random()*100+"vw";
  h.style.fontSize=14+Math.random()*18+"px";
  h.style.animationDuration=6+Math.random()*6+"s";
  document.body.appendChild(h);
}

/* Service Worker */
if("serviceWorker" in navigator){
  navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>
