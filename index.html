<!DOCTYPE html>
<html lang="en">
<head>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ff758c">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday My Love ü§ç</title>

<style>
:root{
  --bg1:#ff758c;--bg2:#ffb3c6;
  --card:rgba(255,255,255,.96);
  --text:#444;
}
body.night{
  --bg1:#0f2027;--bg2:#203a43;
  --card:rgba(20,20,30,.96);
  --text:#eee;
}
body{
  margin:0;min-height:100vh;overflow:hidden;
  display:flex;justify-content:center;align-items:center;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI";
  transition:.6s;
}

/* Lock screen */
.lock{
  position:fixed;inset:0;
  background:linear-gradient(135deg,#111,#333);
  color:white;
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;
  text-align:center;
  z-index:99;
}
.lock h1{font-weight:500}
.lock span{opacity:.8}

/* Card */
.card{
  position:relative;
  width:92%;max-width:420px;
  background:var(--card);
  padding:30px;
  border-radius:26px;
  text-align:center;
  box-shadow:0 30px 60px rgba(0,0,0,.35);
  z-index:2;
  animation:fadeIn 1.4s ease;
}

img{
  width:120px;height:120px;
  border-radius:50%;
  object-fit:cover;
  border:4px solid #ff4d6d;
  margin-bottom:12px;
}

h1{color:#ff4d6d;margin:6px 0}
h2{color:var(--text);font-weight:500;margin-bottom:14px}

p{
  color:var(--text);
  line-height:1.7;
  min-height:90px;
  font-size:1.05rem;
}

footer{margin-top:18px;color:var(--text);font-size:.95rem}

button{
  margin-top:14px;
  padding:10px 18px;
  border:none;border-radius:20px;
  background:#ff4d6d;color:#fff;
  font-size:.9rem;
}

.toggle{
  position:absolute;top:14px;right:16px;
  font-size:1.3rem;cursor:pointer;
}

/* Effects */
.heart{
  position:absolute;top:-10px;
  animation:fall linear infinite;
  opacity:.9;z-index:1;
}
@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg)}
}

.quote{
  position:absolute;color:white;
  opacity:.75;font-size:.9rem;
  animation:float 12s linear infinite;
}
@keyframes float{
  from{transform:translateX(-30vw)}
  to{transform:translateX(130vw)}
}

.spark{
  position:absolute;width:6px;height:6px;
  background:white;border-radius:50%;
  animation:spark 1.2s ease-out forwards;
}
@keyframes spark{
  to{transform:translate(var(--x),var(--y));opacity:0}
}

.popup{
  position:fixed;inset:0;
  background:rgba(0,0,0,.75);
  display:none;justify-content:center;align-items:center;
  z-index:50;
}
.popup div{
  background:white;padding:30px;
  border-radius:20px;
  text-align:center;
}
.popup h1{color:#ff4d6d}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(25px)}
  to{opacity:1}
}
</style>
</head>

<body>

<!-- MIDNIGHT LOCK -->
<div class="lock" id="lock">
  <h1>ü§ç Almost there‚Ä¶</h1>
  <span id="countdown">Opening at midnight (BD)</span>
</div>

<div id="effects"></div>

<div class="card">
  <div class="toggle" onclick="toggleNight()">üåô</div>

  <img src="photo.jpg" alt="Her Photo">

  <h1>Happy Birthday, <span id="name"></span> ü§ç</h1>
  <h2>You turn <span id="age"></span> today ‚ú®</h2>

  <p id="message"></p>

  <footer>‚Äî Always yours, <span id="from"></span></footer>

  <button onclick="playMusic()">üéµ Play Music</button>
  <br>
  <canvas id="qr" width="120" height="120"></canvas>
</div>

<!-- LOVE POPUP -->
<div class="popup" id="popup">
  <div>
    <h1>I love you ü§ç</h1>
    <p>More than words can say.</p>
    <button onclick="closePopup()">Close</button>
  </div>
</div>

<audio id="music" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
/* ‚ú® EDIT ONLY THIS ‚ú® */
const data={
  name:"Her Name",
  age:18,
  message:"You are my safest place, my favorite thought, and my forever choice. I hope this birthday makes you feel as special as you truly are ü§ç",
  from:"Your Name"
};

/* Fill */
name.textContent=data.name;
age.textContent=data.age;
from.textContent=data.from;

/* Typewriter */
let i=0;
(function type(){
  if(i<data.message.length){
    message.textContent+=data.message[i++];
    setTimeout(type,40);
  }
})();

/* üáßüá© Bangladesh Time */
function getBangladeshTime(){
  const now=new Date();
  const utc=now.getTime()+now.getTimezoneOffset()*60000;
  return new Date(utc+6*60*60*1000);
}

/* üéØ Target: 3 March 12:00 AM BD */
function getTargetTime(){
  const bdNow=getBangladeshTime();
  let year=bdNow.getFullYear();
  let target=new Date(year,2,3,0,0,0);
  if(bdNow>target){
    target=new Date(year+1,2,3,0,0,0);
  }
  return target;
}

const targetTime=getTargetTime();
let unlocked=false;

function updateLock(){
  const now=getBangladeshTime();
  const diff=targetTime-now;

  if(diff<=0 && !unlocked){
    unlocked=true;
    lock.style.display="none";
    setTimeout(()=>popup.style.display="flex",2500);
    return;
  }

  if(diff>0){
    const d=Math.floor(diff/(1000*60*60*24));
    const h=Math.floor((diff/(1000*60*60))%24);
    const m=Math.floor((diff/(1000*60))%60);
    countdown.textContent=`Opens in ${d}d ${h}h ${m}m`;
  }
}
setInterval(updateLock,1000);
updateLock();

/* Music */
function playMusic(){music.play();}

/* Night mode */
function toggleNight(){document.body.classList.toggle("night");}

/* Close popup */
function closePopup(){popup.style.display="none";}

/* Hearts */
for(let i=0;i<40;i++){
  const h=document.createElement("div");
  h.className="heart";
  h.textContent="ü§ç";
  h.style.left=Math.random()*100+"vw";
  h.style.fontSize=14+Math.random()*18+"px";
  h.style.animationDuration=6+Math.random()*6+"s";
  effects.appendChild(h);
}

/* Quotes */
["Forever us ü§ç","My safe place","You are my home","Always you"].forEach((q,i)=>{
  const el=document.createElement("div");
  el.className="quote";
  el.textContent=q;
  el.style.top=20+i*18+"vh";
  el.style.animationDelay=i*3+"s";
  effects.appendChild(el);
});

/* QR */
const ctx=qr.getContext("2d");
ctx.fillStyle="#000";
for(let y=0;y<120;y+=10)
  for(let x=0;x<120;x+=10)
    if(Math.random()>.5) ctx.fillRect(x,y,8,8);
</script>

</body>
</html>
